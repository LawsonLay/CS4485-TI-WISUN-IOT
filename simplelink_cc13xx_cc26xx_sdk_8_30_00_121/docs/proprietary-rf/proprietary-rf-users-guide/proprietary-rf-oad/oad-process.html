<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OAD Process &mdash; 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User&#39;s Guide
 7.30.00 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MCUBoot Based Over-the-Air Download (OAD)" href="../proprietary-rf-guide/proprietary-rf-oad-mcuboot-index.html" />
    <link rel="prev" title="OAD Image Tool" href="../oad-secure/tools.html" />
    <script language="JavaScript">
        var tiPageName;
        tiPageName = "sug proprietary-rf-oad oad-process";

        if (location.protocol == "file:"){
            var ci_analytics_poc_load = true;
        }
    </script>

    <script src="http://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript" charset="utf-8"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"> 
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide

          </a>
              <div class="version">
                7.30.00
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart-guide/proprietary-rf-quick-start.html">Proprietary RF Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/index-platform.html">SimpleLink Wireless MCU CC13xx and CC26xx Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/examples-cc13xx_cc26xx.html">Examples User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/custom-hardware.html">Custom Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/tirtos-index-cc13xx_cc26xx.html">TI-RTOS7 (RTOS Kernel) Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/nortos-index.html">noRTOS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/rf-core-index.html">RF Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/physical-rf-layer-cc13xx_cc26xx.html">Physical Layer (PHY)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/debugging-index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/memory-index.html">Memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc13xx_cc26xx/fcc-certification.html">FCC Certification Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/proprietary-rf-oad-bim-index.html">BIM Based Over-the-Air Download (OAD)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../proprietary-rf-guide/proprietary-rf-oad-mcuboot-index.html">MCUBoot Based Over-the-Air Download (OAD)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../oad-mcuboot/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-mcuboot/mcuboot.html">MCUboot Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../oad-mcuboot/image-header.html">MCUboot OAD Image Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="flash-layout-on-chip-oad-mcuboot.html">Flash Layout for On-Chip OAD</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution-flow-mcuboot-proprf-oad.html">Execution flow of MCUBoot Based Proprietary RF OAD</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">OAD Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#proprietary-rf-oad-software-architecture">Proprietary RF OAD software architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="#oad-client">OAD Client</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#oad-client-protocol-functions-and-callbacks">OAD Client Protocol Functions and Callbacks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#oad-server">OAD Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#oad-server-protocol-functions-and-callbacks">OAD Server Protocol Functions and Callbacks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#oad-storage">OAD Storage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/sysconfig-index.html">System Configuration Tool (SysConfig)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy-trace/energy-trace.html">EnergyTrace User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/migration-cc13xx_cc26xx.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/reference-cc13xx_cc26xx.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proprietary-rf-guide/glossary-cc13xx_cc26xx.html">Terms and acronyms</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html">
SimpleLink™ CC13XX/CC26XX SDK
Proprietary RF User's Guide
</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../proprietary-rf-guide/index-cc13xx_cc26xx.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../proprietary-rf-guide/proprietary-rf-oad-bim-index.html">BIM Based Over-the-Air Download (OAD)</a> &raquo;</li>
      <li>OAD Process</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="oad-process">
<span id="oad-process-proprf"></span><h1>OAD Process<a class="headerlink" href="#oad-process" title="Permalink to this headline">¶</a></h1>
<p>This section explains the Over-the-Air Download (OAD) process in a proprietary
RF application when using the TI BIM bootloader. It explains the available software
modules that enable the OAD process.The OAD process can be integrated in a custom RF
application. The TI BLE stack and the TI 15.4 stack for CC13xx share the
same OAD image format, but implement the update process in different ways.</p>
<p>The following steps are part of the update process:</p>
<ol class="arabic simple">
<li><p>Creating an OAD-able binary image for the target.
This step is identical to OAD with BLE or TI 15.4 Stack.</p></li>
<li><p>Uploading the target image to the distributor device.</p></li>
<li><p>Reading the firmware version from the remote target.</p></li>
<li><p>Downloading the image from the distributor to the target device.</p></li>
<li><p>Invoking the <a class="reference internal" href="../proprietary-rf-guide/glossary-cc13xx_cc26xx.html#term-BIM"><span class="xref std std-term">BIM</span></a> and replacing the existing firmware image.</p></li>
</ol>
<p>The OAD message protocol between distributor and target is characterized by
various requests and responses. The next graph shows all relevant message
types:</p>
<div class="figure align-center" id="id2">
<p class="plantuml">
<img src="../_images/plantuml-a49005c76194cc788cb7a3b7c9f487eca8ac7088.png" alt="hide footbox

participant &quot;OAD Distributor application&quot; as d
participant &quot;OAD Target application&quot; as t

activate d
activate t

== Reading the target firmware version ==
d -&gt; t : Firmware version request
d &lt;- t : Firmware version response
== Downloading the image to the target ==
d -&gt; t : Image identify request
d &lt;- t : Image identify response
d &lt;- t : Block request (0)
d -&gt; t : Block response (0)
== Repetition ==
d &lt;- t : Block request (n)
d -&gt; t : Block response (n)"/>
</p>
<p class="caption"><span class="caption-number">Figure 72. </span><span class="caption-text">High-level communication protocol</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="proprietary-rf-oad-software-architecture">
<h2>Proprietary RF OAD software architecture<a class="headerlink" href="#proprietary-rf-oad-software-architecture" title="Permalink to this headline">¶</a></h2>
<p>The update process involves two participants:</p>
<ul class="simple">
<li><p>One server device acting as <a class="reference internal" href="../proprietary-rf-guide/glossary-cc13xx_cc26xx.html#term-OAD-Distributor"><span class="xref std std-term">OAD distributor</span></a></p></li>
<li><p>One or many nodes acting as <a class="reference internal" href="../proprietary-rf-guide/glossary-cc13xx_cc26xx.html#term-OAD-Target"><span class="xref std std-term">OAD target</span></a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the Proprietary RF OAD system, the OAD Client refers to the Target
side software OAD server refers to the Distributor side software.</p>
</div>
<p>There are two tools involved in the oad process:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">oad_img_tool.py</span></code> - Prepares the target image for over the air transfer</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oad_write_bin.py</span></code> - Writes a target image on to the server’s storage</p></li>
</ul>
<p>The OAD distributor buffers new firmware target images using the OAD Storage
service. The OAD target responds to the distributor’s requests and may
download a new firmware. The firmware is then stored using the OAD Storage
service. After the download process, the target invokes the <a class="reference internal" href="../proprietary-rf-guide/glossary-cc13xx_cc26xx.html#term-BIM"><span class="xref std std-term">BIM</span></a> to
copy the image to its final position and to boot the new firmware.</p>
<p>The whole Proprietary RF OAD system can be visualized as shown in the figure.</p>
<div class="figure align-center" id="fig-proprf-oad-topology">
<img alt="../_images/oad-proprf-topology.PNG" src="../_images/oad-proprf-topology.PNG" />
</div>
</div>
<div class="section" id="oad-client">
<h2>OAD Client<a class="headerlink" href="#oad-client" title="Permalink to this headline">¶</a></h2>
<p>The behavior of the OAD client during the OAD process is explained in this state machine.</p>
<div class="figure align-center" id="fig-proprf-oad-client-state-machine">
<img alt="../_images/oad_control_flow_target.png" src="../_images/oad_control_flow_target.png" />
</div>
<div class="section" id="oad-client-protocol-functions-and-callbacks">
<h3>OAD Client Protocol Functions and Callbacks<a class="headerlink" href="#oad-client-protocol-functions-and-callbacks" title="Permalink to this headline">¶</a></h3>
<p>The functions and callbacks used in the OAD client application is listed in this section.
These functions fucntions and callbacks are picked from oad_protocol.h which is included in the project.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/** @brief  Function to initialize the OADProtocol_Params struct to its defaults</span>
<span class="cm">*</span>
<span class="cm">*  @param  params      An pointer to RF_Params structure for</span>
<span class="cm">*                      initialization</span>
<span class="cm">*</span>
<span class="cm">*  Defaults values are:</span>
<span class="cm">*      pRadioAccessFxns    = {0}</span>
<span class="cm">*      pCallbacks          = {0}</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">OADProtocol_Params_init</span><span class="p">(</span><span class="n">OADProtocol_Params_t</span><span class="w"> </span><span class="o">*</span><span class="n">params</span><span class="p">);</span><span class="w"></span>

<span class="cm">/** @brief  Function to send a FW version response packet</span>
<span class="cm">*</span>
<span class="cm">*  @param  pDstAddress         Address to send the response to</span>
<span class="cm">*  @param  fwVersion           Firmware version string to send</span>
<span class="cm">*</span>
<span class="cm">*  @return                     Status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADProtocol_Status_t</span><span class="w"> </span><span class="nf">OADProtocol_sendFwVersionRsp</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">pDstAddress</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">fwVersion</span><span class="p">);</span><span class="w"></span>

<span class="cm">/** @brief  Function to send an OAD image identify request packet</span>
<span class="cm">*</span>
<span class="cm">*  @param  pDstAddress         Address to send the response to</span>
<span class="cm">*  @param  status              status to send</span>
<span class="cm">*</span>
<span class="cm">*  @return                     Status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADProtocol_Status_t</span><span class="w"> </span><span class="nf">OADProtocol_sendOadIdentifyImgRsp</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">pDstAddress</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">status</span><span class="p">);</span><span class="w"></span>

<span class="cm">/** @brief  Function to send an OAD block request packet</span>
<span class="cm">*</span>
<span class="cm">*  @param  pDstAddress         Address to send the request to</span>
<span class="cm">*  @param  imgId               image ID of image blocks</span>
<span class="cm">*  @param  blockNum            block Number to request</span>
<span class="cm">*  @param  multiBlockSize      Numer of blocks in the multi Block transfer (0 or 1 for none-multiblock)</span>
<span class="cm">*</span>
<span class="cm">*  @return                     Status</span>
<span class="cm">*</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADProtocol_Status_t</span><span class="w"> </span><span class="nf">OADProtocol_sendOadImgBlockReq</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">pDstAddress</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">imgId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">blockNum</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">multiBlockSize</span><span class="p">);</span><span class="w"></span>

<span class="cm">/** @brief  Function to send a OAD reset response packet</span>
<span class="cm">*</span>
<span class="cm">*  @param  pDstAddress         Address to send the response to</span>
<span class="cm">*</span>
<span class="cm">*  @return                     Status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADProtocol_Status_t</span><span class="w"> </span><span class="nf">OADProtocol_sendOadResetRsp</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">pDstAddress</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oad-server">
<h2>OAD Server<a class="headerlink" href="#oad-server" title="Permalink to this headline">¶</a></h2>
<p>The behavior of the OAD server during the OAD process is explained in this state machine.</p>
<div class="figure align-center" id="fig-proprf-oad-server-state-machine">
<img alt="../_images/oad_control_flow_server.png" src="../_images/oad_control_flow_server.png" />
</div>
<div class="section" id="oad-server-protocol-functions-and-callbacks">
<h3>OAD Server Protocol Functions and Callbacks<a class="headerlink" href="#oad-server-protocol-functions-and-callbacks" title="Permalink to this headline">¶</a></h3>
<p>The functions and callbacks used in the OAD server application is listed in this section
These functions fucntions and callbacks are picked from oad_protocol.h which is included in the project.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/** @brief  Function to initialize the OADProtocol_Params struct to its defaults</span>
<span class="cm">*</span>
<span class="cm">*  @param  params      An pointer to RF_Params structure for</span>
<span class="cm">*                      initialization</span>
<span class="cm">*</span>
<span class="cm">*  Defaults values are:</span>
<span class="cm">*      pRadioAccessFxns    = {0}</span>
<span class="cm">*      pCallbacks          = {0}</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">OADProtocol_Params_init</span><span class="p">(</span><span class="n">OADProtocol_Params_t</span><span class="w"> </span><span class="o">*</span><span class="n">params</span><span class="p">);</span><span class="w"></span>

<span class="cm">/** @brief  Function to send a FW version request packet</span>
<span class="cm">*</span>
<span class="cm">*  @param  pDstAddress         Address to send the request to</span>
<span class="cm">*</span>
<span class="cm">*  @return                     Status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADProtocol_Status_t</span><span class="w"> </span><span class="nf">OADProtocol_sendFwVersionReq</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">pDstAddress</span><span class="p">);</span><span class="w"></span>

<span class="cm">/** @brief  Function to send an OAD image identify request packet</span>
<span class="cm">*</span>
<span class="cm">*  @param  pDstAddress         Address to send the request to</span>
<span class="cm">*  @param  imgId               image ID used for requesting image blocks</span>
<span class="cm">*  @param  pImgInfoData        Image header</span>
<span class="cm">*</span>
<span class="cm">*  @return                     Status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADProtocol_Status_t</span><span class="w"> </span><span class="nf">OADProtocol_sendImgIdentifyReq</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">pDstAddress</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">imgId</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">pImgInfoData</span><span class="p">);</span><span class="w"></span>

<span class="cm">/** @brief  Function to send an OAD image identify request packet</span>
<span class="cm">*</span>
<span class="cm">*  @param  pDstAddress         Address to send the response to</span>
<span class="cm">*  @param  status              status to send</span>
<span class="cm">*</span>
<span class="cm">*  @return                     Status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADProtocol_Status_t</span><span class="w"> </span><span class="nf">OADProtocol_sendOadIdentifyImgRsp</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">pDstAddress</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">status</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oad-storage">
<h2>OAD Storage<a class="headerlink" href="#oad-storage" title="Permalink to this headline">¶</a></h2>
<p>The OAD storage module provides the APIs to store and retrieve images and version number of images
from flash memory. The APIs are used in both the server and the client oad projects.
These functions fucntions and callbacks are picked from oad_storage.h which is included in the project.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_init</span>
<span class="cm">*</span>
<span class="cm">* @brief   Initialise the OAD Target Profile.</span>
<span class="cm">*</span>
<span class="cm">* @param   None.</span>
<span class="cm">*</span>
<span class="cm">* @return  None.</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">OADStorage_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>
<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_imgIdentifyRead</span>
<span class="cm">*</span>
<span class="cm">* @brief   Read Image header and return number of blocks.</span>
<span class="cm">*</span>
<span class="cm">* @param   imageType   - image type indicating which image to read</span>
<span class="cm">* @param   pImgHdr     - pointer to image header data</span>
<span class="cm">*</span>
<span class="cm">* @return  Total Blocks if image accepted, 0 if Image invalid</span>
<span class="cm">*/</span><span class="w"></span>
<span class="kt">uint16_t</span><span class="w"> </span><span class="nf">OADStorage_imgIdentifyRead</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">imageType</span><span class="p">,</span><span class="w"> </span><span class="n">OADStorage_imgIdentifyPld_t</span><span class="o">*</span><span class="w"> </span><span class="n">pImgId</span><span class="p">);</span><span class="w"></span>

<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_imgIdentifyWrite</span>
<span class="cm">*</span>
<span class="cm">* @brief   Process the Image Identify Write.  Determine from the received OAD</span>
<span class="cm">*          Image Header if the Downloaded Image should be acquired.</span>
<span class="cm">*</span>
<span class="cm">* @param   pValue     - pointer to data to be written</span>
<span class="cm">*</span>
<span class="cm">* @return  Total Blocks if image accepted, 0 if Image rejected</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="nf">OADStorage_imgIdentifyWrite</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">pValue</span><span class="p">);</span><span class="w"></span>

<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_imgBlockRead</span>
<span class="cm">*</span>
<span class="cm">* @brief   Read Image Block.</span>
<span class="cm">*</span>
<span class="cm">* @param   blockNum   - block number to be written</span>
<span class="cm">* @param   pBlockData - pointer for data to be read</span>
<span class="cm">*</span>
<span class="cm">* @return  none</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">OADStorage_imgBlockRead</span><span class="p">(</span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">blockNum</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">pBlockData</span><span class="p">);</span><span class="w"></span>

<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_imgInfoRead</span>
<span class="cm">*</span>
<span class="cm">* @brief   Read an Image info.</span>
<span class="cm">*</span>
<span class="cm">* @param   pimgInfo - pointer for data to be read</span>
<span class="cm">*</span>
<span class="cm">* @return  none</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">OADStorage_imgInfoRead</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">pimgInfo</span><span class="p">);</span><span class="w"></span>

<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_imgBlockWrite</span>
<span class="cm">*</span>
<span class="cm">* @brief   Write Image Block.</span>
<span class="cm">*</span>
<span class="cm">* @param   blockNum   - block number to be written</span>
<span class="cm">* @param   pBlockData - pointer to data to be written</span>
<span class="cm">* @param   len        - length fo block</span>
<span class="cm">*</span>
<span class="cm">* @return  status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="nf">OADStorage_imgBlockWrite</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">blockNum</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">pBlockData</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w"></span>

<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_eraseImgPage</span>
<span class="cm">*</span>
<span class="cm">* @brief   Erases an Image page. Note this is only needed if an image</span>
<span class="cm">*          page has been corrupted typically OADStorage_imgBlockWrite</span>
<span class="cm">*          pre-erase all pages</span>
<span class="cm">*</span>
<span class="cm">* @param  none</span>
<span class="cm">*</span>
<span class="cm">* @return  OADStorage_Status_t</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADStorage_Status_t</span><span class="w"> </span><span class="nf">OADStorage_eraseImgPage</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">page</span><span class="p">);</span><span class="w"></span>

<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_imgFinalise</span>
<span class="cm">*</span>
<span class="cm">* @brief   Process the Image Block Write.</span>
<span class="cm">*</span>
<span class="cm">* @param  none</span>
<span class="cm">*</span>
<span class="cm">* @return  status</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="n">OADStorage_Status_t</span><span class="w"> </span><span class="nf">OADStorage_imgFinalise</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>

<span class="cm">/*********************************************************************</span>
<span class="cm">* @fn      OADStorage_close</span>
<span class="cm">*</span>
<span class="cm">* @brief   Releases the resource required for OAD stoarage.</span>
<span class="cm">*</span>
<span class="cm">* @param  none</span>
<span class="cm">*</span>
<span class="cm">* @return none</span>
<span class="cm">*/</span><span class="w"></span>
<span class="k">extern</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">OADStorage_close</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../oad-secure/tools.html" class="btn btn-neutral float-left" title="OAD Image Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../proprietary-rf-guide/proprietary-rf-oad-mcuboot-index.html" class="btn btn-neutral float-right" title="MCUBoot Based Over-the-Air Download (OAD)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, Texas Instruments.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>